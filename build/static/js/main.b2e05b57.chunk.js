(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(17),i=n.n(o),a=(n(22),n(3)),u=n(4),s=n.n(u),d="/api/persons",f=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},l=function(e){return s.a.delete(d+"/"+e).then((function(e){return e}))},b=function(e,t){return s.a.put(d+"/"+e,t).then((function(e){return e.data}))},h=n(0),m=function(e){var t=e.contact,n=e.allcontacts,c=e.setContacts;return Object(h.jsxs)("p",{children:[t.name," ",t.number,Object(h.jsx)("button",{onClick:function(){window.confirm("sure to delete ".concat(t.name," ?"))&&l(t.id).then((function(e){200===e.status&&c(n.filter((function(e){return e.id!==t.id})))}))},children:"delete"})]})},O=function(e){return Object(h.jsxs)("div",{children:["filter shown with: ",Object(h.jsx)("input",{value:e.newSearchTerm,onChange:e.handleSearchTermChange})]})},v=n(8),p=function(e){var t=e.persons,n=e.setPersons,r=e.setNotification,o=Object(c.useState)(""),i=Object(a.a)(o,2),u=i[0],s=i[1],d=Object(c.useState)(""),f=Object(a.a)(d,2),l=f[0],m=f[1];return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();if(t.some((function(e){return e.name===u&&e.number===l})))window.alert("".concat(u," is already added to phonebook"));else if(u&&u.trim()&&l&&l.trim()){if(t.some((function(e){return e.name===u&&e.number!==l}))){if(window.confirm("".concat(u," is already added to phonebook, replace the old number?"))){var c=t.find((function(e){return e.name===u})),o=Object(v.a)(Object(v.a)({},c),{},{number:l});b(c.id,o).then((function(e){n(t.map((function(t){return t.name===u?e:t}))),s(""),m("");var c={message:"contact ".concat(u," is updated with new number successfully"),isError:!1};r(c),setTimeout((function(){r(null)}),3e3)})).catch((function(e){var o={message:"Information of '".concat(c.name,"' has been removed from server"),isError:!0};r(o),setTimeout((function(){r(null)}),3e3),n(t.filter((function(e){return e.name!==u})))}))}}else j({name:u,number:l}).then((function(e){n(t.concat(e)),s(""),m("");var c={message:"contact ".concat(u," is added successfully"),isError:!1};r(c),setTimeout((function(){r(null)}),3e3)}))}},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:u,onChange:function(e){s(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:l,onChange:function(e){m(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})})},x=function(e){var t=e.notification;if(null!==t&&t.message){var n=t.isError?"error":"notification";return Object(h.jsx)("div",{className:n,children:t.message})}return null},w=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),i=Object(a.a)(o,2),u=i[0],s=i[1],d=Object(c.useState)(!1),j=Object(a.a)(d,2),l=j[0],b=j[1],v=Object(c.useState)(null),w=Object(a.a)(v,2),g=w[0],S=w[1],C=l?n.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})):n;return Object(c.useEffect)((function(){f().then((function(e){r(e)}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{notification:g}),Object(h.jsx)(O,{newSearchTerm:u,handleSearchTermChange:function(e){b(!0),s(e.target.value)}}),Object(h.jsx)("h3",{children:"add a new"}),Object(h.jsx)(p,{persons:n,setPersons:r,setNotification:S}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)("div",{children:C.map((function(e){return Object(h.jsx)(m,{contact:e,allcontacts:n,setContacts:r},e.name)}))})]})};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b2e05b57.chunk.js.map